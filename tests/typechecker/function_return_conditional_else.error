Block definitely returns, but function is void